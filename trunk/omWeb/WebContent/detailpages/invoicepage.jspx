<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ice="http://www.icesoft.com/icefaces/component"
	template="/WEB-INF/templates/defaultTemplate.jspx">
	
	<div style="height: 480px;">

	<ice:panelGrid columns="2" columnClasses="Col1 Col2" styleClass="leiste">
		<!-- DataExporter Start -->
		<ice:panelGroup styleClass="exampleBox dataScrollingContainer">
			<ice:selectOneMenu id="type" value="#{dataExporter.type}" partialSubmit="true"
		            valueChangeListener="#{dataExporter.typeChangeListener}" >
		            <f:selectItem itemLabel="#{msg.tableExport}" itemValue=""/>
		            <f:selectItem itemLabel="MS Excel" itemValue="excel"/>
		            <f:selectItem itemLabel="CSV (comma separated values)" itemValue="csv"/>
		        </ice:selectOneMenu>
		        <br/>
		       <ice:panelGroup effect="#{dataExporter.changeEffect}" style="width:180px;">
		            <ice:dataExporter for="invoice"
		                label="Click to download #{dataExporter.type} file"
		                type="#{dataExporter.type}"
		                popupBlockerLabel="Popup Blocker detected - click here to resume download..."
		                clickToCreateFileText="Click to create #{dataExporter.type} file "/>
		       </ice:panelGroup>
		 </ice:panelGroup>
		 <!-- DataExporter End -->		 			           					
	
		  
		<!-- Buttons Start -->
     	<ice:panelGrid columns="5" columnClasses="buttons" style="width: 112px;">
     		<ice:commandButton title="#{msg.buttonRefresh}" image="images/refresh.jpg" action="#{invoiceLister.init}"/>
     		<ice:commandButton title="#{msg.buttonFilter}" image="images/btn_filter_e.png" action="#{invoiceLister.FilterpopupRendernaendern}"/>
      		<ice:commandButton title="#{msg.buttonNew}" image="images/btn_new_e.png" rendered="#{sitesBean.buttonRendered}" action="#{invoiceLister.PopupRendernaendernNew}"/>
      		<ice:commandButton title="#{msg.buttonEdit}" image="images/btn_edit_e.png" rendered="#{sitesBean.buttonRendered}" visible="#{invoiceLister.visible}" action="#{invoiceLister.PopupRendernaendern}"/>  					  	
     		<ice:commandButton title="#{msg.buttonDelete}" image="images/btn_delete_e.png" rendered="#{sitesBean.buttonRendered}" visible="#{invoiceLister.visible}" action="#{invoiceLister.DeleteInvoice}"/>		           					  	
     	</ice:panelGrid>
     	<!-- Buttons End -->
   </ice:panelGrid>
     	
     	<!--PanelGroup with DataTable and DataPaginator Start -->
     	<ice:panelGroup style="height:30px" ></ice:panelGroup>
		<ice:panelGroup style="margin: auto; ">     	
			
			
			
				<!-- Table Invoice Start -->
				<ice:dataTable value="#{invoiceLister.invoiceList}" var="item" id="invoice" rows="10" styleClass="table">
					<ice:column>
						<!-- RowSelector Start -->
						<ice:rowSelector selectedMouseOverClass="rowSelection"
								value="#{item.selected}"
								selectionListener="#{invoiceLister.rowEvent}"/>
						<!-- RowSelector End -->
						<f:facet name="header">#{msg.tableInvoicenumber}</f:facet>
						<ice:outputText styleClass="textPosition" value="#{item.invoicenumber}"/>
					</ice:column>
					<ice:column>
						<f:facet name="header">#{msg.tableSum}</f:facet>
						<ice:outputText styleClass="textPosition" value="#{item.sum}"><f:convertNumber pattern="#,##0.00"/></ice:outputText>
					</ice:column>
					<ice:column>
						<f:facet name="header">#{msg.tableEstimation}</f:facet>
						<ice:outputText styleClass="textPosition" value="#{item.estimation}"><f:convertNumber pattern="#,##0.00"/></ice:outputText>
					</ice:column>
					<ice:column>
						<f:facet name="header">#{msg.tableDuedate}</f:facet>
						<ice:outputText style="text-align: center;" value="#{item.duedate}"><f:convertDateTime pattern="dd.MM.yyyy" timeZone="Europe/Berlin"/></ice:outputText>
					</ice:column>
					<ice:column>
						<f:facet name="header">#{msg.tableInvoicestate}</f:facet>
						<ice:outputText style="text-align: center;" value="#{item.tblInvoicestate.descriptionIs}"/>
					</ice:column>
					<ice:column>
						<f:facet name="header">#{msg.tableOrdernumber }</f:facet>
						<ice:outputText styleClass="textPosition" value="#{item.tblSettlement.tblOrder.ordernumber}"><f:convertNumber pattern="#,##0.00"/></ice:outputText>
					</ice:column>
					<ice:column>
						<f:facet name="header">#{msg.tableIncometype}</f:facet>
						<ice:outputText style="text-align: left;" value="#{item.tblSettlement.tblIncometype.descriptionIt}"/>
					</ice:column>
					<ice:column>
						<f:facet name="header">#{msg.tableSettlementnumber}</f:facet>
						<ice:outputText style="text-align: textPosition;" value="#{item.tblSettlement.idSettlement}"/>
					</ice:column>
					
				</ice:dataTable>
				<!-- Table Invoice End -->
			
			<ice:panelGroup style="height:30px" ></ice:panelGroup>
			
			<!-- Paginator Start -->
			<ice:panelGrid columns="1" styleClass="scrollerTable2 paginator" columnClasses="standardTable_ColumnCentered">

		        <ice:dataPaginator for="invoice"
		                         fastStep="10"
		                         pageCountVar="pageCount"
		                         pageIndexVar="pageIndex"
		                         paginator="true"
		                         style="margin: auto;"
		                         binding="#{invoiceLister.paginator}">
		 
		                <f:facet name="first" >
		                         <ice:graphicImage url="images/btn_s_arrow_first_e.png" style="border:none;"/>
		                </f:facet>
		 
		                <f:facet name="last">
		                        <ice:graphicImage url="images/btn_s_arrow_last_e.png" style="border:none;" />
		                </f:facet>
		 
		                <f:facet name="previous">
		                        <ice:graphicImage url="images/btn_s_arrow_prev_e.png" style="border:none;" />
		                </f:facet>
		 
		                <f:facet name="next">
		                        <ice:graphicImage url="images/btn_s_arrow_next_e.png" style="border:none;" />
		                </f:facet>
		 
		                <f:facet name="fastforward">
		                        <ice:graphicImage url="images/btn_s_arrow_ff_e.png" style="border:none;" />
		                </f:facet>
		 
		                <f:facet name="fastrewind">
		                        <ice:graphicImage url="images/btn_s_arrow_fr_e.png" style="border:none;" />
		                </f:facet>
		 
		        </ice:dataPaginator>
		 
		        <ice:dataPaginator for="invoice"
		                        rowsCountVar="rowsCount"
		                        displayedRowsCountVar="displayedRowsCountVar"
		                        firstRowIndexVar="firstRowIndex"
		                        lastRowIndexVar="lastRowIndex"
		                        pageCountVar="pageCount"
		                        pageIndexVar="pageIndex"
		                        >
		 
		                 <ice:outputFormat value="{0} orders found, displaying {1} orders, from {2} to {3}. Page {4} / {5}" styleClass="standard" >
		                        <f:param value="#{rowsCount}" />
		                        <f:param value="#{displayedRowsCountVar}" />
		                        <f:param value="#{firstRowIndex}" />
		                        <f:param value="#{lastRowIndex}" />
		                        <f:param value="#{pageIndex}" />
		                        <f:param value="#{pageCount}" />
		                </ice:outputFormat>
		 
		        </ice:dataPaginator>
		 
		    </ice:panelGrid>
		    <!-- Paginator End -->
		    
		</ice:panelGroup>
 		<!-- PanelGroup with DataTable and DataPaginator End -->
			<ui:include src="../Popup/invoicepopup.jspx"></ui:include>
		    <ui:include src="../Popup/invoicefilterpopup.jspx"></ui:include>
	</div>
</html>